<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.king.test.usecaseManage.usecaseRepository.mapper.TfUsecaseHistoryMapper">

    <select id="selectHistoryPage" resultType="com.king.test.usecaseManage.usecaseRepository.entity.TfUsecaseHistory">
        SELECT
            h.USECASE_HISTORY_ID AS usecaseHistoryId,
            h.USECASE_ID AS usecaseId,
            h.OPERATING_TIME AS operatingTime,
            h.OPERATORID AS operatorId,
            u.USER_NAME AS operatorName,
            h.MODIFIED_CONTENT AS modifiedContent
        FROM tf_usecase_history h
        LEFT JOIN t_sys_user u ON h.OPERATORID = u.USER_ID
        <where>
            <if test="usecaseId != null and usecaseId != ''">
                AND h.USECASE_ID = #{usecaseId}
            </if>
        </where>
        ORDER BY h.OPERATING_TIME DESC
    </select>

    <select id="selectHistoryList" resultType="com.king.test.usecaseManage.usecaseRepository.entity.TfUsecaseHistory">
        SELECT
            h.USECASE_HISTORY_ID AS usecaseHistoryId,
            h.USECASE_ID AS usecaseId,
            h.OPERATING_TIME AS operatingTime,
            h.OPERATORID AS operatorId,
            u.USER_NAME AS operatorName,
            h.MODIFIED_CONTENT AS modifiedContent
        FROM tf_usecase_history h
        LEFT JOIN t_sys_user u ON h.OPERATORID = u.USER_ID
        <where>
            <if test="usecaseId != null and usecaseId != ''">
                AND h.USECASE_ID = #{usecaseId}
            </if>
        </where>
        ORDER BY h.OPERATING_TIME DESC
    </select>

</mapper>
